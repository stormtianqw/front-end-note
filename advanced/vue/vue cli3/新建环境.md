# vue cli3新建环境

新建项目后，默认情况下根据使用的命令（CLI 服务）不同，在开发时可以使用不同的环境变量（一般process.env.NODE_ENV）

CLI 服务 | 对应模式 | 模式对应的环境变量
:-- | :-- | :--
`vue-cli-service serve`| `development` | `process.env.NODE_ENV`值为`development`
`vue-cli-service build` `vue-cli-service test:e2e`| `production` | `process.env.NODE_ENV`值为`production`
`vue-cli-service test:unit`| `test` | `process.env.NODE_ENV`值为`test`

所以平时在运行`npm run serve`后可以使用`process.env.NODE_ENV === 'development'`判断语句；在运行`npm run build`后可以使用`process.env.NODE_ENV === 'production'`判断语句

平时开发时，前端页面代码要么在本地运行，要么打包后放到服务器上。后者按实际作用，可以分为测试环境、预发布环境、生产环境。总的来说，一般常用的有四种环境，分别是开发环境、测试环境、预发布环境、生产环境

环境 | 作用
:-- | :--
开发环境 | 平时开发时使用的环境，命令是`npm run serve`，特点是具有热更新、便于调试、有提示信息等
测试环境 | 开发完部分功能后给测试人员使用的环境
预发布环境| 项目发布前预发布的环境，该环境较其他三种环境使用得不是那么高
生产环境 | 项目正式发布的环境，供用户实际使用的环境

实际中配置如下
修改package.json文件
```json
"scripts": {
    "serve": "vue-cli-service serve",
    "build:test": "vue-cli-service build --mode test",
    "build:alpha": "vue-cli-service build --mode alpha",
    "build": "vue-cli-service build",
    "lint": "vue-cli-service lint"
  },
```

在项目根目录下新建`.env.alpha`文件，内容
```
NODE_ENV=alpha
```

配置完成了，然后就可以在开发中愉快地使用环境变量`process.env.NODE_ENV`了，如配置文件config.js中
```js
let config
if (process.env.NODE_ENV === 'development') { // 开发环境
  config = {
    serverPaht: '/api'
  }
} else if (process.env.NODE_ENV === 'test') { // 测试环境
  config = {
    serverPaht: '/test/api'
  }
} else if (process.env.NODE_ENV === 'alpha') { // 预发布环境
  config = {
    serverPaht: '/alpha/api'
  }
} else if (process.env.NODE_ENV === 'production') { // 生产环境
  config = {
    serverPaht: '/production/api'
  }
}
export default config
```


