# vue中强制组件重新加载

vue中组件的组件使用场景主要有以下几种
- 将重复、多次使用的功能抽离出来作为公共组件，避免代码冗余，同时使类似功能的代码样式统一，便于统一修改
- 将一个代码量很多的组件拆分为多个组件，便于维护，如tab页，如果在统一的vue单文件组件中编写所有tab下的内容，单文件组件可能会很大，这会使编写代码变得很吃力
- 用于vue路由中

```HTML
// measure.vue
<template>
  <div>
    <el-button @click="getMeasureData(1)">王富贵</el-button>
    <el-button @click="getMeasureData(2)">李富贵</el-button>
    <measureCard v-if="isShow" :measureData="measureData"/>
  </div>
</template>

<script>
import measureCard from './measureCard.vue'
export dafault {
  components: { measureCard },
  data () {
    return {
      isShow: true,
      measureData: []
    }
  },
  methods: {
    getMeasureData (id) {
      this.isShow = false // 销毁组件
      this.$nextTick(() => { // 重建组件
        this.isShow = true
      })
      const params = { id }
      this.$axios.get('api', { params }).then(response => {
        if (response.code === '00') {
          this.measureData = response.data.records
        } else {
          this.$message.error(response.msg)
        }
      })
    }
  },
  mounted () {
    this.getMeasureData(1)
  }
}
</script>
```
如果组件measureCard只是用于纯展示，类似媒体对象那样，就没必要强制组件重新加载，但是如果组件measureCard可以通过事件触发自身状态（data属性）改变，如当显示王富贵的量测记录时，点击该组件上的按钮使组件的data属性curIndex(初始值为0)变为1，之后切换到李富贵时，虽然此时measureData的确是李富贵的数据，但此时组件measureCard的data属性curIndex值为1（而不是初始值0），这样就可能产生bug。通过上述`v-if="false"`到`v-if="true"`，销毁->重建组件可以解决该bug
